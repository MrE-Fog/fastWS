sudo: required
language: node_js
node_js: 12
notifications:
  email: false
branches:
  only:
  - master
  - "/^v\\d+\\.\\d+(\\.\\d+)?(-\\S*)?$/"
  - "/^test-\\w+$/"
cache:
  directories:
  - node_modules
matrix:
  include:
  - os: osx
  - os: windows
    env:
    - UPLOAD_POSTFIX=:win
  - os: linux
    dist: bionic
    arch: amd64
    compiler: g++-8
    addons:
      apt:
        packages:
        - g++-8
    env:
    - CC=gcc-8
    - CXX=g++-8
    - AR=gcc-ar-8
  - os: linux
    dist: bionic
    arch: arm64
    compiler: g++-8
    addons:
      apt:
        packages:
        - g++-8
    env:
    - CC=gcc-8
    - CXX=g++-8
    - AR=gcc-ar-8
install:
- npm install
script:
- npm run prebuild-node
- if [[ -n "$TRAVIS_TAG" ]]; then npm run prebuild-upload$UPLOAD_POSTFIX; fi
after_success:
- if [[ -n "$TRAVIS_TAG" ]]; then npm run ci-publish || true; fi
env:
  global:
  - secure: ZGgZ4lEfHeBC8dhvAZwSv17IBaXOVXtGH3cYQCWe1xgVT6LFhQFj6CDxaZw+M+CbuxyjY7dDX2agNZJW0/GYN/SBcJcrKAlsFlX3vByhTVWk9A/lBgUnGRylq3rOSmP48KM2LIS3dvH+WeXXQ1QPHyFhw4O1DfirtmrlOna7of+fdRutp8V6F7dtPNKFQ9ViHrGBGYNMBg1mzM9eGkykyiymZpbdsN32u14YLi2z50vWUB7iFfnmno7gdTdgZppr84cDPJiEcn0ySTz+E2Y0xVVafUoEoIZDLOChaEnQoZAFBqpmb7c7RnFDYfltXA6gjSh672Ztkc3tosMAedO7OPUgqw/6qnIaFlPHneyQySxaOV/Vc1565FRm5JS5pGWunruD6xpYsUdFliabcgPH10XSeX+FgoAz3FI8YDe9RzqGmXeNSDbqz09mLtyK5yy5KIDjGk5OqEhMiXX+gD3080cbOxTR7BllHIx/FlX7jcBbZfL/LzMpjUJg8YzjZrO8jyI7LBVq9xafVdBljFLy0aOFndI+bUGtNod04PcFesy8P1U76EHc2Wt5dbuukP5seQYNdAApw/YlpSqnfIrG1qChb4bSv7m+SO6rmWKWwbHyk/xPcQASGLpFxXTeV4Q3fx2rlzJFqYt2L7WnqNpHnv19/+6yTmeSLG0CtKW/PUY=
  - secure: NutNWbYO06I46TbAnDFgStEa2Gg2l8g91dPHPbTt1OcLg3mCx5DM4ijLGhzhZYGv0lEtw8ILr56EbRgMHfBkviNmg6uRN8DwB8CtuGTbeDsAVyOg7DLD/aFbO+FDh5hNSDoYb2O+uq1J5IK3yeQG+HRlveb6Z7KhvjkMrtOR9PZe0GUu1g5IP83YSnAqrPCyq3MwPvu4pQwsnnI14RFyfBlpz03P7oxWgcmyqBflsjPvSs30YwQekSmA3FA2hmjygi7xwhbr7cVhuc2A9B8sb4AvWD8QP5wuQqZaVN50cLs5kYmB1dJbW6eSZMf3VvnFc9q3MEaHuuyZe1i+c/1mbYMYAAGbZN5PDLB1wkvFY3otDSyW43RmxGM9ggNvX0XXsJQ+pGw8t3sacwvjiyIYH2N9/42zUdWtiiZ3SZ5tPXNVhR48g0YkqYIfn7n6grJTCwIDVktv6h6xfSiH4VwrytumK/quKF0aaMklakjrhJqV6M7sSqlbH+eNTuwWr5jT2biR7gH+xwUjVoARHqJlAmoGRTvLo6vbv+TEanS2dMO7sSZK39x31HQ6GhFo4kOqJuVOsP/i31ULl/X+P13iWfpPlDWeA+IUDcWKrloDYtRnrZei3BDD3Lu2LLkh/hRpic9M8LyOJyLPmgNrR2BhM7uhBHRjEfzCyMmdVbTF/y0=
